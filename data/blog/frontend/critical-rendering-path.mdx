---
date: "2023-06-28"
title: Critical Rendering Path
tags: ["frontend"]
draft: false
summary: "웹페이지가 브라우저에 빠르게 표시되기 위한 과정"
---

## 렌더링 과정

1. 서버에 파일요청
2. HTML 파싱하여 DOM트리 생성
   - 이 과정에서 스크립트 태그를 만나게 되면 자바스크립트의 실행이 완료될때까지 파싱을 멈추게 되는 데 자세한 내용은 [async, defer](/blog/async-defer) 포스트로 정리하였음
3. CSS 파싱하여 CSSOM 생성
4. DOM과 CSSOM을 결합하여 렌더트리 생성
5. 레이아웃 생성
   1. 각각의 엘리먼트들의 크기를 계산하고 위치를 배치
6. 페인팅 진행
   1. 각각의 영역들을 레이어로 만들어 비트맵형태의 래스터 이미지로 변환
   2. 레이어로 분리하는 이유는 수정 시 해당 부분이 포함된 레이어를 빠르게 합성과정으로 전달하기 위함
7. 합성 진행
   1. 각 레이어를 결합하여 최종 이미지를 생성
   2. 합성과정은 주로 GPU에서 처리되므로 빠른 결과 생성이 가능<br/>

## 각 과정이 발생하는 경우

### 레이아웃이 발생하는 상황

- 엘리먼트의 크기나 위치가 변경될 때
  - 자바스크립트에 의해 DOM이 변경되거나 스타일이 변경되는 경우
  - 폰트가 변경되는 경우
- 브라우저 창의 크기가 변경될 때

### 페인팅만 발생하는 상황

- 엘리먼트의 스타일이 변경되지만 크기나 위치가 변경되지 않는 경우
  - 투명도나 배경색이 변하는 경우
  - 폰트가 변경되는 경우
  - visible, hidden과 같은 visibility속성이 변하는 경우

### 합성만 발생하는 상황

- transform, filter 등 일부 CSS 속성 중 GPU를 사용하게 되는 경우
- 캔버스에 그려진 이미지의 스타일을 변경하는 경우

## 각 과정만 발생하는 정확한 상황은 아래 사이트를 참고

[https://www.lmame-geek.com/css-triggers/](https://www.lmame-geek.com/css-triggers/)
